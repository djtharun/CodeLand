<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>VR Debugging Assistant - Enhanced</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="src/js/res/aframe.min.js"></script>
  <script src="src/js/res/ort.min.js"></script>  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- A-Frame VR Scene -->
  <a-scene background="color: #0a0e27" fog="type: exponential; color: #0a0e27; density: 0.1">
    <!-- Camera with Voice Recognition -->
    <a-entity id="rig" position="0 1.6 5">
      <a-camera look-controls wasd-controls="acceleration: 20">
        <a-cursor
          color="#00ff88"
          raycaster="objects: .clickable"
          fuse="true"
          fuse-timeout="1500">
        </a-cursor>
      </a-camera>
    </a-entity>

    <!-- Lighting -->
    <a-light type="ambient" color="#445566" intensity="0.5"></a-light>
    <a-light type="point" position="0 4 0" color="#00ff88" intensity="1"></a-light>
    <a-light type="point" position="5 3 5" color="#3498db" intensity="0.7"></a-light>
    <a-light type="point" position="-5 3 -5" color="#e74c3c" intensity="0.7"></a-light>

    <!-- Main Display Panel -->
    <a-entity id="mainPanel" position="0 2 -4">
      <a-plane width="6" height="3.5" color="#0f1419" opacity="0.95" shader="flat"></a-plane>
      <a-plane width="6.1" height="3.6" color="#00ff88" opacity="0.2" shader="flat" position="0 0 -0.01"></a-plane>

      <a-text
        value="AI DEBUGGING ASSISTANT"
        align="center"
        position="0 1.5 0.01"
        color="#00ff88"
        width="5"
        font="mozillavr">
      </a-text>

      <a-text
        id="mainText"
        value="Upload a code file to begin analysis..."
        align="left"
        position="-2.8 0.8 0.01"
        width="5.5"
        wrap-count="65"
        color="#ffffff"
        line-height="50">
      </a-text>

      <a-circle
        id="statusLight"
        radius="0.08"
        position="2.6 1.5 0.01"
        color="#00ff88"
        opacity="0.8">
        <a-animation
          attribute="scale"
          from="1 1 1"
          to="1.3 1.3 1"
          direction="alternate"
          repeat="indefinite"
          dur="1000">
        </a-animation>
      </a-circle>
    </a-entity>

    <!-- Code Execution Flow Visualization Area -->
    <a-entity id="executionFlow" position="-6 2 -8"></a-entity>

    <!-- Variable State Display -->
    <a-entity id="variableStates" position="6 2 -8"></a-entity>

    <!-- Error Timeline -->
    <a-entity id="errorTimeline" position="0 0.5 -12"></a-entity>

    <!-- Code Visualization Area -->
    <a-entity id="codeViz" position="0 1.5 -8"></a-entity>

    <!-- Interactive Buttons -->
    <a-entity id="vrButtons" position="0 0.8 -3">
      <a-box id="vrAnalyzeBtn" class="clickable" position="-2.5 0 0" depth="0.2" height="0.5" width="1.2" color="#00ff88" opacity="0.9">
        <a-text value="ANALYZE" align="center" position="0 0 0.11" color="#000" width="1.5"></a-text>
      </a-box>

      <a-box id="vrVisualizeBtn" class="clickable" position="-1 0 0" depth="0.2" height="0.5" width="1.2" color="#3498db" opacity="0.9">
        <a-text value="VISUALIZE" align="center" position="0 0 0.11" color="#fff" width="1.5"></a-text>
      </a-box>

      <a-box id="vrExecuteBtn" class="clickable" position="0.5 0 0" depth="0.2" height="0.5" width="1.2" color="#9b59b6" opacity="0.9">
        <a-text value="EXECUTE" align="center" position="0 0 0.11" color="#fff" width="1.5"></a-text>
      </a-box>

      <a-box id="vrVoiceBtn" class="clickable" position="2 0 0" depth="0.2" height="0.5" width="1.2" color="#f39c12" opacity="0.9">
        <a-text value="VOICE" align="center" position="0 0 0.11" color="#fff" width="1.5"></a-text>
      </a-box>

      <a-box id="vrClearBtn" class="clickable" position="3.5 0 0" depth="0.2" height="0.5" width="1.2" color="#e74c3c" opacity="0.9">
        <a-text value="CLEAR" align="center" position="0 0 0.11" color="#fff" width="1.5"></a-text>
      </a-box>
    </a-entity>

    <!-- Breakpoint Markers Container -->
    <a-entity id="breakpoints" position="0 1.5 -7"></a-entity>

    <!-- Multi-user Avatars Container -->
    <a-entity id="avatars"></a-entity>

    <!-- Floor with Grid -->
    <a-plane rotation="-90 0 0" width="50" height="50" color="#0a0e27" shader="flat"></a-plane>
    
    <!-- Grid Helper -->
    <a-entity id="grid" position="0 0.01 0"></a-entity>
  </a-scene>

  <!-- UI Overlay -->
  <div id="ui-overlay">
    <h2>üîç VR Debug Assistant</h2>
    
    <div class="control-group">
      <label>Upload Code File</label>
      <input type="file" id="fileInput" accept=".js,.py,.ts,.java,.cpp,.c,.cs,.txt">
    </div>

    <div class="control-group">
      <label>Select Language</label>
      <select id="langSelect">
        <option value="javascript">JavaScript</option>
        <option value="python">Python</option>
        <option value="typescript">TypeScript</option>
        <option value="java">Java</option>
        <option value="csharp">C#</option>
        <option value="cpp">C++</option>
      </select>
    </div>

    <div class="control-group">
      <label>Analysis Mode</label>
      <select id="modeSelect">
        <option value="static">Static Analysis</option>
        <option value="codebert">CodeBERT (Local)</option>
        <option value="ai">AI Analysis (API)</option>
      </select>
    </div>

    <button class="btn" id="analyzeBtn">ü§ñ Analyze Code</button>
    <button class="btn btn-secondary" id="visualizeBtn">üìä Visualize Flow</button>
    <button class="btn" id="executeBtn" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">‚ñ∂Ô∏è Execute & Debug</button>
    <button class="btn" id="voiceBtn" style="background: linear-gradient(135deg, #f39c12, #e67e22);">üé§ Voice Control</button>
    <button class="btn btn-danger" id="clearBtn">üóëÔ∏è Clear Session</button>

    <div id="status">Ready to debug...</div>

    <div class="control-group" id="voiceControls" style="display: none;">
      <label>Voice Commands</label>
      <div style="font-size: 10px; color: #888; line-height: 1.4;">
        Say: "analyze", "visualize", "execute", "set breakpoint", "show variables", "next step"
      </div>
    </div>

    <div id="help-text">
      <strong>Controls:</strong><br>
      ‚Ä¢ Mouse: Look around<br>
      ‚Ä¢ Click: Interact with nodes<br>
      ‚Ä¢ WASD: Move (desktop)<br>
      ‚Ä¢ Voice: Enable for commands<br>
      <br>
      <strong>Model:</strong> <span id="modelStatus">Loading CodeBERT...</span>
    </div>
  </div>

  <!-- Execution Panel -->
  <div id="execution-panel" style="display: none;">
    <h3>Execution State</h3>
    <div id="execution-step">Step: 0</div>
    <div id="execution-variables"></div>
    <button class="btn btn-secondary" id="stepBtn">Next Step</button>
    <button class="btn btn-secondary" id="continueBtn">Continue</button>
  </div>
  
  <!-- Load Scripts -->
  <script type="module" src="src/js/enhanced-main.js"></script>
</body>
</html>